# 第 1 章  计算机网络与因特网

## 计算机网络分类

1. **按距离划分**：广域网或远程网(WAN)、局域网(LAN)、城域网(MAN)

2. **按通信介质分**：

   - **有线网络**：采用同轴电缆、双绞线、光纤等物理介质来传输数据的网络

   - **无线网络**：采用卫星、微波等无线通信介质来传输的网络

   

     

## 协议层次及其分层模型

为了给网络协议的设计提供一个结构， 网络设计者以**分层（layer）**的方式组织协议以及实现这些协议的网络硬件和软件 。**每层通过在该层中执行某些动作或使用直接下层的服务来提供服务** 。 （*例如，由第n层提供的服务可能包括报文从网络的一边到另一边的可靠交付。 这可能是通过使用第n-1层的边缘到边缘的不可靠报文传送服务， 加上第几层的检测和重传丢失报文的功能来实现的*）

典型的网络协议包含三个要素：

- **语法**：语法用来规定由协议的**控制信息**和**传送数据**所组成的传输信息应遵循的格式，即传输信息的数据结构形式，以便通信双方能正确地识别所传送的各种信息。
- **语义**：语义是对构成协议的各个协议元素的含义的解释。
- **同步（时序**）：它规定实体之间通信操作执行的顺序，协调双方的操作，使两个实体之间有序地进行合作，共同完成数据传输任务。



综合起来，各层的所有协议称之为**协议栈（protocol stack）**，因特网的协议层次通常由五个层次组成：**物理层、链路层、网络层、运输层、应用层。**

>5层只是OSI和TCP/IP的综合，是业界产生出来的非官方协议模型，但是有很多具体的应用，也是本书采取的一种协议分层方法。

| **应用层** |
| :--------: |
| **传输层** |
| **网络层** |
| **链路层** |
| **物理层** |



#### OSI七层参考模型

从上到下依次是：**应用层、表示层、会话层、传输层、网络层、数据链路层、物理层。**

|    层次    |                             功能                             |      信息分组名称      |
| :--------: | :----------------------------------------------------------: | :--------------------: |
| **应用层** | 应用层是网络应用程序及它们的应用层协议存留的地方。应用层协议分布在多个端系统上， 而一个端系统中的应用程序使用协议与另一个端系统中的应用程序交换信息分组。 |  **报文（message）**   |
| **表示层** | 表示层定义用户或应用程序之间交换数据的格式，提供数据表示之间的转换服务。即对源端计算机内部的数据结构编码，形成适合于网络传输的数据流，到了目标计算机再进行解码，形成目标端用户所要求的格式。 |                        |
| **会话层** | 会话层的功能是在传输层的服务基础之上增加控制会话的机制，向两个实体的表示层提供建立和使用连接的方法。 |                        |
| **传输层** | 基本功能是接受上一层的数据，并在必要时将数据进行分割，然后将数据单元传递给网络层。在因特网中， 有两种运输协议， 即**TCP**和**UDP**协议。 | **报文段（segment）**  |
| **网络层** | 网络层控制通信子网的运行过程，负责将称为数据报的网络层分组从一台主机移动到另一台主机，即将分组从源节点路由到目标节点。 | **数据报（datagram）** |
| **链路层** | 通过各种控制协议，将有差错的物理信道变为无差错的、能可靠传输数据帧的数据链路。即将整个帧从一个网络元素移动到邻近的网络元素 |    **帧（frame）**     |
| **物理层** | 物理层的任务是将帧中的一个个比特从一个节点移动到下一个节点。 在这层中的协议仍然是链路相关的， 并且进一步与该链路（例如， 双绞铜线、 单模光纤） 的实际传输媒体相关。 |    **比特（bit）**     |

>- **TCP（transmission control protocol 传输控制协议）**：TCP向它的应用程序提供了面向连接的服务。 这种服务包括了应用层报文向目的地的确保传递和流量控制（即发送方/接收方速率匹配）。TCP也将长报文划分为短报文，并提供拥塞控制机制，因此当网络拥塞时，源抑制其传输速率。 
>- **UDP（user data protocol 用户数据协议）：**UDP协议向它的应用程序提供无连接服务。 这是一种不提供不必要服务的服务，没有可靠性，没有流量控制，也没有拥塞控制。 



![](https://tonydeng.github.io/sdn-handbook/basic/images/tcpip.png)



#### TCP/IP四层参考模型

TCP/IP四层模型，主要包括：**应用层、运输层、网际层和网络接口层。**

**OSI七层和TCP/IP四层的关系**：

- OSI引入了服务、接口、协议、分层的概念，TCP/IP借鉴了OSI的这些概念建立TCP/IP模型。

- OSI先有模型，后有协议，先有标准，后进行实践而TCP/IP则相反，先有协议和应用再提出了模型，且是参照的OSI模型。
- OSI是一种理论下的模型，而TCP/IP已被广泛使用，成为网络互联事实上的标准。

<style>th{text-align:center}</style>
<table>
<thead>
    <tr>
        <th> OSI七层网络模型 </th>
        <th> TCP/IP四层概念模型</th>
        <th> 对应网络协议 </th>
    </tr>
</thead>
    <tbody>
    <tr>
        <td> 应用层（Application） </td>
        <td rowspan='3'> 应用层 </td>
        <td> HTTP, TFTP, FTP, NFS, WAIS, SMTP </td>
    </tr>
    <tr>
        <td> 表示层（Presentation） </td>
        <td> Telnet, Rlogin, SNMP, Gopher </td>
    </tr>
    <tr>
        <td> 会话层（Session） </td>
        <td> SMTP, DNS </td>
    </tr>
    <tr>
        <td> 传输层（Transport） </td>
        <td> 传输层 </td>
        <td> TCP, UDP </td>
    </tr>
    <tr>
        <td> 网络层（Network） </td>
        <td> 网际层 </td>
        <td> IP, ICMP, ARP, RARP, AKP, UUCP </td>
    </tr>
    <tr>
        <td> 数据链路层（Data Link） </td>
        <td rowspan='2'> 网络接口层 </td>
        <td> FDDI, Ethernet, Arpanet, PDN, SLIP, PPP </td>
    </tr>
    <tr>
        <td> 物理层（Physical） </td>
        <td>IEEE 802.1A, IEEE 802.2到IEEE 802.11 </td>
    </tr>
    </tbody>
</table>




#### 封装

一个**应用层报文（application-layer message）**被传送给运输层 ，在最简单的情况下,运输层收取到报文并附上附加信息，该首部将被接收端的运输层使用。应用层报文和运输层首部信息一道构成了**运输层报（transport-layer segment）**。运输层报文段因此**封装**了应用层报文。 附加的信息也许包括了下列信息：允许接收端运输层向上向适当的应用程序交付报文的信息； 差错检测位信息，该信息让接收方能够判断报文中的比特是否在途中已被改变。 运输层则向网络层传递该报文段， 网络层增加了如源和目的端系统地址等网络层首部信息，生成了**网络层数据报（network-layer datagram）**。该数据报接下来被传递给链路层， 链路层（自然而然地）增加它自己的链路层首部信息并生成**链路层帧（link-layer frame）**。

![image-20220928032540441](C:\Users\Mr_Right\AppData\Roaming\Typora\typora-user-images\image-20220928032540441.png)

